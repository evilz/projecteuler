@namespace Projecteuler.Components.Problems
@page "/problem/45"
@inherits ProblemBase

@{
    base.BuildRenderTree(__builder);
}

@code {
    protected override int Ref => 45;

    protected override string ProblemTitle => "Triangular, Pentagonal, and Hexagonal";

    protected override string Description => "<p>Triangle, pentagonal, and hexagonal numbers are generated by the following formulae:</p>\n<table><tr><td>Triangle</td>\n<td> </td>\n<td>$T_n=n(n+1)/2$</td>\n<td> </td>\n<td>$1, 3, 6, 10, 15, \\\\dots$</td>\n</tr><tr><td>Pentagonal</td>\n<td> </td>\n<td>$P_n=n(3n - 1)/2$</td>\n<td> </td>\n<td>$1, 5, 12, 22, 35, \\\\dots$</td>\n</tr><tr><td>Hexagonal</td>\n<td> </td>\n<td>$H_n=n(2n - 1)$</td>\n<td> </td>\n<td>$1, 6, 15, 28, 45, \\\\dots$</td>\n</tr></table><p>It can be verified that $T_{285} = P_{165} = H_{143} = 40755$.</p>\n<p>Find the next triangle number that is also pentagonal and hexagonal.</p>";

    protected override string Explanation => "Every hexagonal number is also a triangle number ($H_n = T_{2n-1}$). Therefore, we only need to iterate through hexagonal numbers starting from $n=144$ and check if they are also pentagonal.";

    protected override long Resolve()
    {
        long result = 0;
        int i = 143;
        while (true)
        {
            i++;
            long h = (long)i * (2 * i - 1);
            if (IsPentagonal(h))
            {
                result = h;
                break;
            }
        }
        return result;
    }

    private bool IsPentagonal(long n)
    {
        double penTest = (Math.Sqrt(1 + 24 * n) + 1) / 6;
        return penTest == (int)penTest;
    }
}


