@namespace Projecteuler.Components.Problems
@using System
@using System.Collections.Generic
@using System.Numerics
@page "/problem/29"
@inherits ProblemBase

@{
    base.BuildRenderTree(__builder);
}

@code {
    protected override int Ref => 29;

    protected override string ProblemTitle => "Distinct Powers";

    protected override string Description => "<p>Consider all integer combinations of $a^b$ for $2 \\\\le a \\\\le 5$ and $2 \\\\le b \\\\le 5$:\n$$\\\\begin{array}{rrrr}\n2^2=4, &amp;2^3=8, &amp;2^4=16, &amp;2^5=32\\\n3^2=9, &amp;3^3=27, &amp;3^4=81, &amp;3^5=243\\\n4^2=16, &amp;4^3=64, &amp;4^4=256, &amp;4^5=1024\\\n5^2=25, &amp;5^3=125, &amp;5^4=625, &amp;5^5=3125\n\\\\end{array}$$</p>\n<p>If they are then placed in numerical order, with any repeats removed, we get the following sequence of $15$ distinct terms:\n$$4, 8, 9, 16, 25, 27, 32, 64, 81, 125, 243, 256, 625, 1024, 3125.$$</p>\n<p>How many distinct terms are in the sequence generated by $a^b$ for $2 \\\\le a \\\\le 100$ and $2 \\\\le b \\\\le 100$?</p>";

    protected override string Explanation => "We generate all values $a^b$ for $2\\\\le a\\\\le 100$ and $2\\\\le b\\\\le 100$ using `BigInteger` and add them to a set. The number of distinct terms is the set count.";

    protected override long Resolve()
    {
        HashSet<BigInteger> terms = new();
        for (int a = 2; a <= 100; a++)
        {
            for (int b = 2; b <= 100; b++)
            {
                terms.Add(BigInteger.Pow(a, b));
            }
        }

        return terms.Count;
    }
}


